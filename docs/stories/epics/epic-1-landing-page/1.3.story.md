# Story 1.3 — Formulários de Captura de Leads

**Épico:** EPIC-1 (Landing Page)
**Status:** Ready
**Pontos:** 5
**Requisito:** FR-001.6

## Executor Assignment
- **executor:** @dev
- **quality_gate:** @architect
- **quality_gate_tools:** [manual form test, webhook test, XSS scan]

## Dependencies
- **Story 1.2** (Analytics) — Eventos de conversão dependem do analytics configurado

---

## User Story
**Como** visitante interessado na ZENT I.A.,
**Eu quero** preencher um formulário simples com meus dados,
**Para que** a equipe entre em contato comigo e eu possa começar a usar a plataforma.

## Acceptance Criteria

- [ ] **AC-1:** Formulário de contato na seção de CTA final com campos: Nome, Email, WhatsApp, Plano de interesse (select)
- [ ] **AC-2:** Validação client-side: campos obrigatórios, formato de email, formato de WhatsApp (telefone brasileiro)
- [ ] **AC-3:** Feedback visual de sucesso após envio (mensagem + animação)
- [ ] **AC-4:** Feedback visual de erro com mensagens específicas por campo
- [ ] **AC-5:** Dados do formulário são enviados para webhook do GoHighLevel
- [ ] **AC-6:** Anti-spam: honeypot field (sem captcha para não prejudicar conversão)
- [ ] **AC-7:** Formulário funciona em mobile sem problemas de usabilidade
- [ ] **AC-8:** UTM parameters são enviados junto com os dados do lead
- [ ] **AC-9:** Evento de conversão dispara no GA4 e Meta Pixel ao enviar com sucesso

## Scope

### IN
- Formulário de captura de leads
- Validação client-side
- Integração com webhook GHL
- Anti-spam (honeypot)
- Tracking de conversão

### OUT
- CRM/backend próprio para armazenar leads
- Email de confirmação (feito pelo GHL)
- Double opt-in

## Tasks
- [ ] Criar HTML do formulário na seção CTA final
- [ ] Estilizar formulário (dark theme, glassmorphism)
- [ ] Implementar validação JavaScript (nome, email, WhatsApp)
- [ ] Implementar campo honeypot
- [ ] Integrar com webhook GoHighLevel (fetch POST)
- [ ] Implementar feedback de sucesso/erro
- [ ] Adicionar captura de UTM params no formulário
- [ ] Disparar evento de conversão (GA4 + Meta Pixel)
- [ ] Testar em mobile (iOS Safari, Android Chrome)

## Dev Notes
- Webhook GHL: URL será configurada no .env
- Formato WhatsApp brasileiro: (XX) XXXXX-XXXX ou 55XXXXXXXXXXX
- Honeypot: campo hidden com name genérico (ex: "website"), se preenchido = bot

## File List
- [ ] `index.html` — Formulário HTML na seção CTA
- [ ] `css/style.css` — Estilos do formulário
- [ ] `js/form.js` — Novo: validação, submit, feedback
- [ ] `.env` — URL do webhook GHL

## Risks
- Webhook GHL pode ter rate limiting ou falhar silenciosamente
- Honeypot pode ser insuficiente contra bots sofisticados
- Validação de WhatsApp brasileiro tem muitos formatos (com/sem +55, DDD)

## Definition of Done
- [ ] Todas as ACs verificadas e aprovadas
- [ ] Formulário envia dados com sucesso para webhook GHL
- [ ] Lead aparece no CRM do GoHighLevel após envio
- [ ] Validação funciona em mobile (iOS Safari + Android Chrome)
- [ ] Honeypot bloqueia submissões de bots
- [ ] Code review aprovado

## CodeRabbit Integration
> **CodeRabbit Integration**: Disabled
>
> CodeRabbit CLI is not enabled in `core-config.yaml`.
> Quality validation will use manual review process only.

## Testing
- Enviar formulário com dados válidos → verificar sucesso + lead no GHL
- Enviar formulário com dados inválidos → verificar mensagens de erro
- Enviar formulário com honeypot preenchido → verificar rejeição silenciosa
- Testar em mobile: iOS Safari, Android Chrome
- Verificar evento de conversão no GA4 e Meta Pixel
- Testar com UTM params → verificar que são enviados ao webhook

## Change Log
| Data | Autor | Mudança |
|------|-------|---------|
| 2026-02-17 | @pm | Story criada |
| 2026-02-17 | @po | Validada — GO. Adicionadas seções obrigatórias, dependência com 1.2 |

## Dev Agent Record
*Preenchido pelo @dev durante implementação*

## QA Results
*Preenchido pelo @qa durante review*
